import SwiftUI
public extension AttributedString { init(html: String, defaultFont: PlatformFont, defaultColor: PlatformColor) throws { let data = Data(html.utf8); let options: [NSAttributedString.DocumentReadingOptionKey: Any] = [.documentType: NSAttributedString.DocumentType.html, .characterEncoding: String.Encoding.utf8.rawValue]; let nsAttr = try NSMutableAttributedString(data: data, options: options, documentAttributes: nil); nsAttr.beginEditing(); nsAttr.enumerateAttributes(in: NSRange(location: 0, length: nsAttr.length)) { attrs, range, _ in var attrs = attrs; if attrs[.font] == nil { attrs[.font] = defaultFont }; if attrs[.foregroundColor] == nil { attrs[.foregroundColor] = defaultColor }; nsAttr.setAttributes(attrs, range: range) }; nsAttr.endEditing(); self = AttributedString(nsAttr) } }